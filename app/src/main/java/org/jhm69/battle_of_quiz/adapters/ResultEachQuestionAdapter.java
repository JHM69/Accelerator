package org.jhm69.battle_of_quiz.adapters;import android.animation.Animator;import android.annotation.SuppressLint;import android.content.Context;import android.content.res.ColorStateList;import android.graphics.Color;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.view.animation.Animation;import android.view.animation.AnimationUtils;import android.view.animation.DecelerateInterpolator;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.TextView;import androidx.annotation.NonNull;import androidx.recyclerview.widget.RecyclerView;import com.google.android.material.bottomsheet.BottomSheetDialog;import org.jhm69.battle_of_quiz.R;import org.jhm69.battle_of_quiz.models.Question;import org.jhm69.battle_of_quiz.models.QuestionEachResult;import org.jhm69.battle_of_quiz.utils.MathView;import java.util.List;public class ResultEachQuestionAdapter extends RecyclerView.Adapter<ResultEachQuestionAdapter.MyViewHolder> {    List<QuestionEachResult> questionEachResults;    BottomSheetDialog mBottomSheetDialog;    LinearLayout question, sol;    View sheetView;    int count;    Context context;    int lastPosition = -1;    @SuppressLint("InflateParams")    public ResultEachQuestionAdapter(List<QuestionEachResult> questionEachResults, Context context) {        this.questionEachResults = questionEachResults;        mBottomSheetDialog = new BottomSheetDialog(context);        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);        sheetView = inflater.inflate(R.layout.item_result_question, null);        // sheetView.startAnimation((Animation) context.getResources().getAnimation(R.anim.slide_up));        question = sheetView.findViewById(R.id.question);        sol = sheetView.findViewById(R.id.expCard);        this.context = context;    }    @NonNull    @Override    public ResultEachQuestionAdapter.MyViewHolder onCreateViewHolder(ViewGroup viewGroup, int i) {        View view = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.item_each_question_result, viewGroup, false);        return new MyViewHolder(view);    }    @Override    public void onBindViewHolder(@NonNull ResultEachQuestionAdapter.MyViewHolder viewHolder, int i) {        Animation animation = AnimationUtils.loadAnimation(context,                (i > lastPosition) ? R.anim.up_from_bottom                        : R.anim.down_from_top);        viewHolder.itemView.startAnimation(animation);        lastPosition = i;        // int lastPosition = -1;        QuestionEachResult q = questionEachResults.get(i);        try {            if (q.getLeftSide()) {                viewHolder.thisLeftUser.setBackgroundResource(R.drawable.ic_baseline_check_24);            } else {                viewHolder.thisLeftUser.setBackgroundResource(R.drawable.ic_baseline_clear_24);            }        } catch (NullPointerException ig) {        }        try {            if (q.getRightSide()) {                viewHolder.thatRightUser.setBackgroundResource(R.drawable.ic_baseline_check_24);            } else {                viewHolder.thatRightUser.setBackgroundResource(R.drawable.ic_baseline_clear_24);            }        } catch (NullPointerException ig) {        }        viewHolder.question.setText(String.valueOf(i + 1));        viewHolder.itemView.setOnClickListener(view -> {            count = 0;            playAnim(question, 0, q.getQuestion().getQuestion(), q.getQuestion());            mBottomSheetDialog.setContentView(sheetView);            mBottomSheetDialog.show();        });    }    @Override    public int getItemCount() {        return questionEachResults.size();    }    private void playAnim(final View questionView, final int value, final String data, Question question) {        LinearLayout optionsContainer = sheetView.findViewById(R.id.contaner);        questionView.animate().alpha(value).scaleX(value).scaleY(value).setDuration(500).setStartDelay(100)                .setInterpolator(new DecelerateInterpolator()).setListener(new Animator.AnimatorListener() {            @Override            public void onAnimationStart(Animator animation) {                if (value == 0 && count < 4) {                    String option = "";                    optionsContainer.getChildAt(count).setBackgroundTintList(ColorStateList.valueOf(Color.parseColor("#848280")));                    if (count == 0) {                        option = question.getA();                    } else if (count == 1) {                        option = question.getB();                    } else if (count == 2) {                        option = question.getC();                    } else if (count == 3) {                        option = question.getD();                    }                    LinearLayout CorrectLayout = (LinearLayout) optionsContainer.getChildAt(question.getAns());                    CorrectLayout.setBackgroundTintList(ColorStateList.valueOf(Color.parseColor("#4BBB4F")));                    LinearLayout linearLayout = (LinearLayout) optionsContainer.getChildAt(count);                    playAnim(linearLayout, 0, option, question);                    count++;                }            }            @Override            public void onAnimationEnd(Animator animation) {                if (value == 0) {                    LinearLayout layout = (LinearLayout) questionView;                    ((MathView) layout.getChildAt(0)).setDisplayText(data);                    questionView.setTag(data);                    ((MathView) sol.getChildAt(0)).setDisplayText(question.getHint());                    playAnim(questionView, 1, data, question);                }            }            @Override            public void onAnimationCancel(Animator animation) {            }            @Override            public void onAnimationRepeat(Animator animation) {            }        });    }    public static class MyViewHolder extends RecyclerView.ViewHolder {        ImageView thisLeftUser, thatRightUser;        TextView question;        public MyViewHolder(View itemView) {            super(itemView);            thisLeftUser = itemView.findViewById(R.id.thisUserImage);            thatRightUser = itemView.findViewById(R.id.otherUserImage);            question = itemView.findViewById(R.id.textView10);        }    }}